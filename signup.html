<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="./images/logo.png">
    <title>Create A New Account</title>
</head>
<style>
body {
  background-color: white;
}

#form {
  margin: auto;
  width: 60%;
  padding: 30px;
  background-color: white;
  border: 2px solid black;
  border-radius: 10px;
}

label {
  font-size: 1.2em;
  color: black;
  margin-bottom: 10px;
  display: block;
}

input[type="text"],
input[type="password"] {
  width: 100%;
  padding: 12px 20px;
  margin: 8px 0;
  box-sizing: border-box;
  border: 2px solid black;
  border-radius: 4px;
  background-color: #f8f8f8;
  color: black;
}

button[type="submit"] {
  width: 100%;
  background-color: black;
  color: white;
  padding: 14px 20px;
  margin: 8px 0;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

button[type="submit"]:hover {
  background-color: white;
  color: black;
}




</style>
<body>
    <form id="form">
      <label>name:</label>
        <input type="text" id="name" required>
        <label>Username:</label>
        <input type="text" id="username" required>
        <br>
        <label>Password:</label>
        <input type="password" id="password" required>
        <br>
        <!-- <label>Email:</label>
        <input type="email" id="email" required>
        <br> -->
        <button type="submit">Sign Up</button>
      </form>
       
</body>
<script>
  // let form = document.getElementById("form");
  let form = document.getElementById("form");
form.addEventListener("submit", (event) => {
  event.preventDefault();
  let name = document.getElementById("name").value;
  let username = document.getElementById("username").value;
  let password = document.getElementById("password").value;

  // request to receive the list of users
  fetch("https://63c69db7dcdc478e15c55914.mockapi.io/UsersAPI")
    .then((res) => res.json())
    .then((data) => {
      let existingUsername = data.find(user => user.username === username);
      let existingname = data.find(user => user.name === name);
      if (existingUsername) {
        // User already exists, do not allow sign up
        alert("This username is already taken. Please choose another one.");
      }
     else if(existingname) {
      alert("This name is already taken. Please choose another one.");
     }
      
      else {
        // User does not exist, allow sign up
        let newUser = {
          name: name,
          username: username,
          password: password
        };
        fetch("https://63c69db7dcdc478e15c55914.mockapi.io/UsersAPI", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify(newUser)
        })
          .then((res) => res.json())
          .then((data) => {
            console.log(data);
            alert(` Welcome! ${data.name}.You have successfully created an account with "TRENDING EAGLE"`);
          });
      }
    });
});


// fetch("https://63c69db7dcdc478e15c55914.mockapi.io/UsersAPI/23", {
//   method: "DELETE"
// })
//   .then(response => {
//     if (response.ok) {
//       console.log("Item deleted successfully");
//     } else {
//       throw new Error("Error deleting item");
//     }
//   })
//   .catch(error => {
//     console.error(error);
//   });

    
</script>
</html>